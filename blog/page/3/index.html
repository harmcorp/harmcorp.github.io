
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://harmcorp.github.io/blog/page/3/">
      
      
      
        <link rel="next" href="../../tags/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>this is blog index! - HARM CORP</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.d7758b05.min.css">
      
      


  
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--rabbitmq{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.035 9.601h-7.677a.956.956 0 0 1-.962-.962V.962a.956.956 0 0 0-.962-.956H10.56a.956.956 0 0 0-.962.956V8.64a.956.956 0 0 1-.962.962H5.762a.956.956 0 0 1-.961-.962V.962A.956.956 0 0 0 3.839 0H.959a.956.956 0 0 0-.956.962v22.076A.956.956 0 0 0 .965 24h22.07a.956.956 0 0 0 .962-.962V10.58a.956.956 0 0 0-.962-.98zm-3.86 8.152a1.437 1.437 0 0 1-1.437 1.443h-1.924a1.437 1.437 0 0 1-1.436-1.443v-1.917a1.437 1.437 0 0 1 1.436-1.443h1.924a1.437 1.437 0 0 1 1.437 1.443z"/></svg>');}</style>

    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#this-is-blog-index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="HARM CORP" class="md-header__button md-logo" aria-label="HARM CORP" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HARM CORP
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              this is blog index!
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HARM CORP" class="md-nav__button md-logo" aria-label="HARM CORP" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    HARM CORP
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    this is blog index!
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/holidays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Holidays
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="this-is-blog-index">this is blog index!</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-10-15 00:00:00+00:00">October 15, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-ce"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/">또 Docker CE 설치하기</a></h2>
<p>공짜 <code>GCE instance</code> 가 맛탱이가 가서 다시 하나 파고 <code>Docker</code> 를 설치하려고 하니 또 머가 바뀐것같아서 버벅대는걸 기록으로 남긴다.</p>
<h3 id="amazon-linux-2"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#amazon-linux-2"><code>Amazon Linux 2</code> 버전..</a></h3>
<pre><code class="language-shell">$ amazon-linux-extras install docker
</code></pre>
<p>또는</p>
<pre><code class="language-shell">$ yum install docker
</code></pre>
<p>귀찮아서 설치/유저그룹추가/도커 서비스 시작/부팅 시 서비스 자동시작 을 한번에</p>
<pre><code class="language-shell"># 명령어 실행 후 재로그인 해야함
$ sudo yum install -y docker &amp;&amp; sudo usermod -a -G docker $USER &amp;&amp; sudo systemctl start docker &amp;&amp; sudo systemctl enable docker
</code></pre>
<blockquote>
<p>쉽죠?</p>
</blockquote>
<p>유저를 그룹에 넣는건 마찬가지로 해야한다.</p>
<h3 id="linux"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#linux"><code>linux</code> 버전..</a></h3>
<pre><code class="language-shell">$ cat /etc/*-release | uniq
CentOS Linux release 8.0.1905 (Core)
NAME=&quot;CentOS Linux&quot;
VERSION=&quot;8 (Core)&quot;
ID=&quot;centos&quot;
ID_LIKE=&quot;rhel fedora&quot;
VERSION_ID=&quot;8&quot;
PLATFORM_ID=&quot;platform:el8&quot;
PRETTY_NAME=&quot;CentOS Linux 8 (Core)&quot;
ANSI_COLOR=&quot;0;31&quot;
CPE_NAME=&quot;cpe:/o:centos:centos:8&quot;
HOME_URL=&quot;https://www.centos.org/&quot;
BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;

CENTOS_MANTISBT_PROJECT=&quot;CentOS-8&quot;
CENTOS_MANTISBT_PROJECT_VERSION=&quot;8&quot;
REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
REDHAT_SUPPORT_PRODUCT_VERSION=&quot;8&quot;

CentOS Linux release 8.0.1905 (Core)
</code></pre>
<blockquote>
<p>메뉴얼 설치를 했다가 잘안되서 이것저것하다가 됐는데, 왜 되는질 몰라서 새로운 instance 에서 다시 설치한다.</p>
</blockquote>
<p>메뉴얼 설치(download the RPM package and install it manually)가 있고 레포지토리를 통한 설치(Install using the repository)가 있는데, 레포지토리를 권장한다고 한다.<br />
권장 방법으로..</p>
<h4 id="_1"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_1">레포지토리 추가</a></h4>
<pre><code class="language-shell">$ sudo yum install -y yum-utils \
  device-mapper-persistent-data \
  lvm2

$ sudo yum-config-manager \
      --add-repo \
      https://download.docker.com/linux/centos/docker-ce.repo

</code></pre>
<h4 id="_2"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_2">레포지토리를 통한 설치</a></h4>
<pre><code class="language-shell">$ sudo yum install docker-ce docker-ce-cli containerd.io
</code></pre>
<h4 id="_3"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_3">실행</a></h4>
<pre><code class="language-shell">$ sudo systemctl start docker
$ sudo systemctl enable docker
$ docker ps -a
Got permission denied -while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/containers/json?all=1: dial unix /var/run/docker.sock: connect: permission denied
</code></pre>
<p>얼씨구.
현재 <code>user</code> 를 <code>docker group</code> 에 넣어 줘야 한다.</p>
<h4 id="_4"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_4">유저 확인</a></h4>
<pre><code class="language-shell">$ cat /etc/passwd
...
herdin86:x:1000:1001::/home/herdin86:/bin/bash
...
</code></pre>
<h4 id="_5"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_5">그룹 확인</a></h4>
<pre><code class="language-shell">$ cat /etc/group
...
herdin86:x:1001:
docker:x:991:
...
</code></pre>
<h4 id="_6"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_6">그룹에 유저 추가</a></h4>
<pre><code class="language-shell">$ sudo usermod -a -G docker $USER
$ sudo systemctl restart docker
$ exit
</code></pre>
<h4 id="_7"><a class="toclink" href="../../2019/10/15/%EB%98%90-docker-ce-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/#_7">실행되는지 확인</a></h4>
<pre><code class="language-shell">$ docker version
Client: Docker Engine - Community
 Version:           19.03.3
 API version:       1.40
 Go version:        go1.12.10
 Git commit:        a872fc2f86
 Built:             Tue Oct  8 00:58:10 2019
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.3
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.10
  Git commit:       a872fc2f86
  Built:            Tue Oct  8 00:56:46 2019
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.6
  GitCommit:        894b81a4b802e4eb2a91d1ce216b8817763c29fb
 runc:
  Version:          1.0.0-rc8
  GitCommit:        425e105d5a03fabd737a126ad93d62a9eeede87f
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683

$ docker run hello-world
  Unable to find image 'hello-world:latest' locally
  latest: Pulling from library/hello-world
  1b930d010525: Pull complete
  Digest: sha256:c3b4ada4687bbaa170745b3e4dd8ac3f194ca95b2d0518b417fb47e5879d9b5f
  Status: Downloaded newer image for hello-world:latest

  Hello from Docker!
  This message shows that your installation appears to be working correctly.

  To generate this message, Docker took the following steps:
   1. The Docker client contacted the Docker daemon.
   2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
      (amd64)
   3. The Docker daemon created a new container from that image which runs the
      executable that produces the output you are currently reading.
   4. The Docker daemon streamed that output to the Docker client, which sent it
      to your terminal.

  To try something more ambitious, you can run an Ubuntu container with:
   $ docker run -it ubuntu bash

  Share images, automate workflows, and more with a free Docker ID:
   https://hub.docker.com/

  For more examples and ideas, visit:
   https://docs.docker.com/get-started/
</code></pre>
<p>끝.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-10-15 00:00:00+00:00">October 15, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="linux"><a class="toclink" href="../../2019/10/15/linux-%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/">Linux 배포버전 확인하기</a></h2>
<blockquote>
<p>역시나 내가 만든 자료는 거이 없기 떄문에 출처를 명시한다.
<a href="https://zetawiki.com/wiki/리눅스_종류_확인,_리눅스_버전_확인">출처</a></p>
</blockquote>
<h4 id="1-grep-etc-release"><a class="toclink" href="../../2019/10/15/linux-%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/#1-grep-etc-release">1. <code>grep . /etc/*-release</code></a></h4>
<pre><code class="language-shell">$ grep . /etc/*-release
/etc/centos-release:CentOS Linux release 8.0.1905 (Core)
/etc/os-release:NAME=&quot;CentOS Linux&quot;
/etc/os-release:VERSION=&quot;8 (Core)&quot;
/etc/os-release:ID=&quot;centos&quot;
/etc/os-release:ID_LIKE=&quot;rhel fedora&quot;
/etc/os-release:VERSION_ID=&quot;8&quot;
/etc/os-release:PLATFORM_ID=&quot;platform:el8&quot;
/etc/os-release:PRETTY_NAME=&quot;CentOS Linux 8 (Core)&quot;
/etc/os-release:ANSI_COLOR=&quot;0;31&quot;
/etc/os-release:CPE_NAME=&quot;cpe:/o:centos:centos:8&quot;
/etc/os-release:HOME_URL=&quot;https://www.centos.org/&quot;
/etc/os-release:BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;
/etc/os-release:CENTOS_MANTISBT_PROJECT=&quot;CentOS-8&quot;
/etc/os-release:CENTOS_MANTISBT_PROJECT_VERSION=&quot;8&quot;
/etc/os-release:REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
/etc/os-release:REDHAT_SUPPORT_PRODUCT_VERSION=&quot;8&quot;
/etc/redhat-release:CentOS Linux release 8.0.1905 (Core)
/etc/system-release:CentOS Linux release 8.0.1905 (Core)
</code></pre>
<h4 id="2-cat-etc-release-uniq"><a class="toclink" href="../../2019/10/15/linux-%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/#2-cat-etc-release-uniq">2. <code>cat /etc/*-release | uniq</code></a></h4>
<pre><code class="language-shell">$ cat /etc/*-release | uniq
CentOS Linux release 8.0.1905 (Core)
NAME=&quot;CentOS Linux&quot;
VERSION=&quot;8 (Core)&quot;
ID=&quot;centos&quot;
ID_LIKE=&quot;rhel fedora&quot;
VERSION_ID=&quot;8&quot;
PLATFORM_ID=&quot;platform:el8&quot;
PRETTY_NAME=&quot;CentOS Linux 8 (Core)&quot;
ANSI_COLOR=&quot;0;31&quot;
CPE_NAME=&quot;cpe:/o:centos:centos:8&quot;
HOME_URL=&quot;https://www.centos.org/&quot;
BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;

CENTOS_MANTISBT_PROJECT=&quot;CentOS-8&quot;
CENTOS_MANTISBT_PROJECT_VERSION=&quot;8&quot;
REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
REDHAT_SUPPORT_PRODUCT_VERSION=&quot;8&quot;

CentOS Linux release 8.0.1905 (Core)
</code></pre>
<h4 id="3-grep-etcissue"><a class="toclink" href="../../2019/10/15/linux-%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/#3-grep-etcissue">3. <code>grep . /etc/issue*</code></a></h4>
<blockquote>
<p>이건 centos 랑 안맞나?</p>
</blockquote>
<pre><code class="language-shell">$ grep . /etc/issue*
/etc/issue:\S
/etc/issue:Kernel \r on an \m
/etc/issue.net:\S
/etc/issue.net:Kernel \r on an \m
</code></pre>
<h4 id="rpm-qa-release"><a class="toclink" href="../../2019/10/15/linux-%EB%B0%B0%ED%8F%AC%EB%B2%84%EC%A0%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/#rpm-qa-release"><code>rpm -qa *-release</code></a></h4>
<pre><code class="language-shell">$ rpm -qa *-release
centos-release-8.0-0.1905.0.9.el8.x86_64
</code></pre>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-26 00:00:00+00:00">September 26, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="closure"><a class="toclink" href="../../2019/09/26/%ED%81%B4%EB%A1%9C%EC%A0%B8closure%EA%B0%80-%EB%AD%90%EC%A7%80/">클로져(Closure)가 뭐지?</a></h2>
<p>클로져란</p>
<p><a href="https://futurecreator.github.io/2018/08/09/java-lambda-and-closure/">참고</a></p>
<blockquote>
<ul>
<li>외부 범위의 변수를 함수 내부로 바인딩하는 기술.</li>
<li>함수를 만들고 그 함수 내부의 코드가 탐색하는 스코프를 (함수 생성 당시의) 렉시컬 스코프로 고정한 것.</li>
</ul>
</blockquote>
<pre><code class="language-javascript">function produceAddFunc(x) {
  return function(y) {
    return x + y;
  }
}
</code></pre>
<p><code>produceAddFunc</code> 함수는 함수를 반환하는데, 반환되는 함수는 전달받은 파라미터에 <code>produceAddFunc</code> 함수의 파라미터를 더해서 반환하는 함수이다.
<code>produceAddFunc</code> 함수가 종료되더라도 x 값이 유지가 되는데 이를 클로저라 한다.</p>
<p>주어진 <code>context</code> 바깥의 변수를 참조 하는 경우를 클로져라 보면 될 것 같다.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-26 00:00:00+00:00">September 26, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="accepted-socket"><a class="toclink" href="../../2019/09/26/accepted-socket-%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%80/">Accepted Socket 의 상태가...?</a></h2>
<p>이 <a href="{{ site.url }}/tcp-time-wait/">포스트</a>를 정리하다가 나만 모르는 놀라운 정보를 알게 되었다.
<code>ServerSocket</code> 에서 <code>accept()</code> 시 반환 되는 server socket(client socket 과 연동 된) 의 포트가 서버의 listening socket 포트와 같다는 것...</p>
<pre><code class="language-java">...
ServerSocket serverSocket = new ServerSocket(3000);
...
Socket socket = serverSocket.accept();
...
</code></pre>
<blockquote>
<p>위의 코드에서 <code>accept()</code> 반환받는 Socket 객체에 바인딩 된 포트는 내 상식으로는 3000 이 커널에서 선택한 유휴포트로 알고 있었다.
그런데 그게 이제 아닌가보다..... 이상하다 학부때는 분명 그렇게 배운 것 같았는데............ 언제부터 바뀐건지 원래 잘못 알고있었던건지 알 수 가 없다...</p>
</blockquote>
<p>이 <a href="http://docs.likejazz.com/time-wait/">포스트</a> 에 따르면,  서버에서 사용할 수 있는 포트의 갯수는 3 ~ 6 만개 이다.</p>
<pre><code class="language-shell">$ sysctl net.ipv4.ip_local_port_range
net.ipv4.ip_local_port_range = 32768    60999
</code></pre>
<p>파일디스크립터의 갯수는 가변적이지만,</p>
<pre><code class="language-shell">$ sysctl fs.file-max
fs.file-max = 57545
</code></pre>
<p>늘릴 수 있다고한다. 26만개 이상?</p>
<p>그런데 위의 포스트에선 TIME_WAIT 상태인 소켓을 9만개인 것을 확인 했단다..</p>
<blockquote>
<p>아니 이게 무슨말이오</p>
</blockquote>
<p>소켓 하나에 서버의 로컬포트가 1개 씩 바인딩 된다고 하면 저건 말이 안된다.</p>
<p>그래서 나도 간단하게 확인만 해보았다..</p>
<p><a href="https://github.com/herdin/SimpleJava/blob/master/src/main/java/com/harm/unit/io/network/SocketStudy0101.java">서버 소스</a>, <a href="https://github.com/herdin/SimpleJava/blob/master/src/main/java/com/harm/unit/io/network/SocketStudy0102.java">클라이언트 소스</a>  </p>
<p>서버는 단순한 에코 서버이고 클라이언트를 여러개 상대한다..</p>
<h4 id="_1"><a class="toclink" href="../../2019/09/26/accepted-socket-%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%80/#_1">서버측 로그</a></h4>
<pre><code class="language-shell">2019-09-27 17:19:29.505 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ----------------------------------------
2019-09-27 17:19:29.509 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | START TIME : 20190927171929
2019-09-27 17:19:29.522 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | SocketStudy0101 STARTED
2019-09-27 17:19:29.525 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ........................................
2019-09-27 17:19:29.529 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0101 : SERVER SOCKER CREATION.
2019-09-27 17:19:56.385 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0101 : ACCEPT LOCAL /127.0.0.1:3000 REMOTE /127.0.0.1:54133
2019-09-27 17:19:56.388 DEBUG --- [ Thread-0 ] c.h.u.i.n.SocketStudy0101$1Worker : WORKER0 THREAD START LOCAL /127.0.0.1:3000 REMOTE /127.0.0.1:54133
2019-09-27 17:19:59.362 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0101 : ACCEPT LOCAL /127.0.0.1:3000 REMOTE /127.0.0.1:54139
2019-09-27 17:19:59.363 DEBUG --- [ Thread-1 ] c.h.u.i.n.SocketStudy0101$1Worker : WORKER1 THREAD START LOCAL /127.0.0.1:3000 REMOTE /127.0.0.1:54139
2019-09-27 17:20:29.659 DEBUG --- [ Thread-0 ] c.h.u.i.n.SocketStudy0101$1Worker : RECV 첫번째 클라이언트에서 보낸 메세지
2019-09-27 17:20:46.056 DEBUG --- [ Thread-1 ] c.h.u.i.n.SocketStudy0101$1Worker : RECV 두번째 클라이언트에서 보낸 메세지
</code></pre>
<h4 id="_2"><a class="toclink" href="../../2019/09/26/accepted-socket-%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%80/#_2">첫번째 클라이언트 로그</a></h4>
<pre><code class="language-shell">2019-09-27 17:19:56.377 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ----------------------------------------
2019-09-27 17:19:56.382 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | START TIME : 20190927171956
2019-09-27 17:19:56.384 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | SocketStudy0102 STARTED
2019-09-27 17:19:56.384 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ........................................
2019-09-27 17:19:56.385 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : CLIENT SOCKET CREATION
2019-09-27 17:19:56.387 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : TYPE MESSAGE :
첫번째 클라이언트에서 보낸 메세지
2019-09-27 17:20:29.660 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : RECV WORKER0[첫번째 클라이언트에서 보낸 메세지]
2019-09-27 17:20:29.660 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : TYPE MESSAGE :
</code></pre>
<h4 id="_3"><a class="toclink" href="../../2019/09/26/accepted-socket-%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%80/#_3">두번째 클라이언트 로그</a></h4>
<pre><code class="language-shell">2019-09-27 17:19:59.354 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ----------------------------------------
2019-09-27 17:19:59.359 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | START TIME : 20190927171959
2019-09-27 17:19:59.361 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : | SocketStudy0102 STARTED
2019-09-27 17:19:59.361 DEBUG --- [ main ] c.h.u.DefaultUnitHandler : ........................................
2019-09-27 17:19:59.362 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : CLIENT SOCKET CREATION
2019-09-27 17:19:59.363 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : TYPE MESSAGE :
두번째 클라이언트에서 보낸 메세지
2019-09-27 17:20:46.058 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : RECV WORKER1[두번째 클라이언트에서 보낸 메세지]
2019-09-27 17:20:46.059 DEBUG --- [ main ] c.h.u.i.n.SocketStudy0102 : TYPE MESSAGE :
</code></pre>
<p>아니.. 리모트는 다른데 로컬포트가 같애 이게 어떻게된거지..</p>
<h4 id="_4"><a class="toclink" href="../../2019/09/26/accepted-socket-%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%80/#_4">결론</a></h4>
<p>소켓은 <code>&lt;protocol&gt;</code>, <code>&lt;src addr&gt;</code>, <code>&lt;src port&gt;</code>, <code>&lt;dest addr&gt;</code>, <code>&lt;dest port&gt;</code> 이 5개 값이 유니크하게 구성된다. 따라서 서버 포트가 추가되거나 클라이언트의 IP가 추가될 경우 그 만큼의 새로운 쌍을 생성할 수 있어 TIME_WAIT가 많이 남아 있어도 별 문제가 없다.</p>
<p>라고 한다.. 대체 언제부터 바뀐걸까.. 내가 잘못알고 있었던걸까.. 흑흑..</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-26 00:00:00+00:00">September 26, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tcp-time_wait"><a class="toclink" href="../../2019/09/26/tcp-time_wait-%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C/">TCP TIME_WAIT 에 대해서</a></h2>
<p><a href="http://blog.daum.net/_blog/BlogTypeView.do?blogid=0RxIq&amp;articleno=268&amp;_bloghome_menu=recenttext">정리 대상 블로그</a></p>
<p>접속시작할때, 3-way Handshake
<img alt="image" src="/assets/images/posts/2019-09-26-tcp-time-wait-01.gif" /></p>
<p>접속종료할때, 4-way Handshake
<img alt="image" src="/assets/images/posts/2019-09-26-tcp-time-wait-02.gif" /></p>
<p>접속을 종료할때,<br />
Client 에서 FIN 을 보내고 Server 의 Ack 를 받은 다음,
Server 에서 FIN 을 보내고 Client 의 Ack 를 받으면 Client 와 Server 는 소켓을 닫기전에 서로 정리해야될 일들이 끝난 상태이다.</p>
<p>Server 의 FIN 을 보내기 전에 Server 에서 보낸 패킷이 FIN 보다 늦게 Client 에 도착하게 된다면 패킷이 유실되게 된다.<br />
위와 같이 데이터가 유실되는 경우를 막기 위해 Server 의 FIN 을 받은 Client 의 소켓은 TIME_WAIT 상태가 되는데 기본적으로 2MSL(60초) 동안 기다리면서 유실될 수 있는(늦게도착하는) 패킷을 기다린다고 한다.</p>
<p>순서를 보장하지 않는 네트워크 환경 때문에 유실될 수 있는 문제를 해결하고자 만든 TIME_WAIT 는 오히려 Server 쪽에 문제를 발생 시킬 수 있는데, 그냥 기다리는 소켓이 많아지게 되면 Server 에 부하+소켓부족으로 제 기능을 못하게 될 수 가 있다.</p>
<p>LINGER 옵션 : OS 옵션으로 closesocket()를 호출했을 때 아직 전송되지 않은 SendBuffer 의 데이터의 처리옵션</p>
<p><code>LINGER.l_onoff = 1, LINGER.l_linger = 0</code>
- closesocket() 즉시 반환
- 버퍼의 데이터 버림
- 비정상종료(Abortive Shutdown) -&gt; TIME_WAIT 가 남지 않음</p>
<p><code>LINGER.l_onoff = 1, LINGER.l_linger = non-zero</code>
- 정상적인 종료가 될 때 까지 closesocket() 반환하지 않음
- 정상적인 종료과정(Graceful Shutdown) 진행. LINGER.l_linger (초) 만큼 대기 후 정상종료가 되지 않으면 비정상종료진행(closesocket() 즉시 반환 및 버퍼의 데이터 버림).</p>
<p><code>LINGER.l_onoff = 0</code>
- closesocket() 즉시 반환
- 정상적인 종료과정(Graceful Shutdown) 을 Background 로 진행.
- 언제 종료됐는지 알 수 없음.</p>
<p>접속을 종료를 먼저 시도(closesocket() 호출)하는 쪽에 TIME_WAIT 가 남기 때문에, Server 가 아니라 Client 에서 먼저 접속 종료를 시도를 해야 Server 에 TIME_WAIT 가 남지 않는다.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-23 00:00:00+00:00">September 23, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="xss-csrfxsrf-same-origin-policy-cors"><a class="toclink" href="../../2019/09/23/xss-csrfxsrf-same-origin-policy-cors/">XSS, CSRF/XSRF, Same-Origin policy, CORS</a></h2>
<p>웹취약점이라고 자주 듣는 단어들이 있는데, 듣기만 자주 듣고 뭔지 정확히 모르니 짜증나서 정리한다</p>
<h3 id="xss-cross-site-scripting"><a class="toclink" href="../../2019/09/23/xss-csrfxsrf-same-origin-policy-cors/#xss-cross-site-scripting">XSS (Cross-Site Scripting)</a></h3>
<p><a href="https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8C%85">위키</a></p>
<blockquote>
<p>사이트 간 스크립팅(또는 크로스 사이트 스크립팅, 영문 명칭 cross-site scripting, 영문 약어 XSS)은 웹 애플리케이션에서 많이 나타나는 취약점의 하나로 <strong>웹사이트 관리자가 아닌 이가 웹 페이지에 악성 스크립트를 삽입할 수 있는 취약점이다. 주로 여러 사용자가 보게 되는 전자 게시판에 악성 스크립트가 담긴 글을 올리는 형태로 이루어진다.</strong> 이 취약점은 웹 애플리케이션이 사용자로부터 입력 받은 값을 제대로 검사하지 않고 사용할 경우 나타난다. 이 취약점으로 해커가 사용자의 정보(쿠키, 세션 등)를 탈취하거나, 자동으로 비정상적인 기능을 수행하게 할 수 있다. 주로 다른 웹사이트와 정보를 교환하는 식으로 작동하므로 사이트 간 스크립팅이라고 한다.</p>
</blockquote>
<p>게시판 등 자료를 올릴 수 있는 페이지에 악성 스크립트를 심는 경우이다.</p>
<p>보통 필터에서 스크립트 패턴등을 제거함으로써 방지할 수 있다.</p>
<h3 id="csrfxsrf-cross-site-request-forgery"><a class="toclink" href="../../2019/09/23/xss-csrfxsrf-same-origin-policy-cors/#csrfxsrf-cross-site-request-forgery">CSRF/XSRF (Cross-Site Request Forgery)</a></h3>
<p><a href="https://ko.wikipedia.org/wiki/사이트_간_요청_위조">위키</a></p>
<blockquote>
<p>사이트 간 요청 위조(또는 크로스 사이트 요청 위조, 영어: Cross-site request forgery, CSRF, XSRF)는 웹사이트 취약점 공격의 하나로, 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위(수정, 삭제, 등록 등)를 특정 웹사이트에 요청하게 하는 공격을 말한다.</p>
<p>유명 경매 사이트인 옥션에서 발생한 개인정보 유출 사건에서 사용된 공격 방식 중 하나다.</p>
<p>사이트 간 스크립팅(XSS)을 이용한 공격이 사용자가 특정 웹사이트를 신용하는 점을 노린 것이라면, 사이트간 요청 위조는 특정 웹사이트가 사용자의 웹 브라우저를 신용하는 상태를 노린 것이다. 일단 사용자가 웹사이트에 로그인한 상태에서 사이트간 요청 위조 공격 코드가 삽입된 페이지를 열면, 공격 대상이 되는 웹사이트는 위조된 공격 명령이 믿을 수 있는 사용자로부터 발송된 것으로 판단하게 되어 공격에 노출된다.</p>
</blockquote>
<p><strong>정상적인 사용자가 로그인 한 뒤</strong>, 악의적인 사용자로 부터 전달 받은</p>
<pre><code class="language-html">&lt;img src= &quot;https://travel.service.com/travel_update?.src=Korea&amp;.dst=Hell&quot;&gt;
</code></pre>
<p>태그가 있는 페이지를 열게 되면 악의적인 사용자의 요청을 서버는 정상적인 사용자의 요청으로 판단하게 됨.</p>
<p><code>Referrer</code> 검증과 <code>Security Token</code> 사용으로 방지할 수 있다.</p>
<h2 id="same-origin-policy"><a class="toclink" href="../../2019/09/23/xss-csrfxsrf-same-origin-policy-cors/#same-origin-policy">Same-Origin Policy</a></h2>
<p><code>javascript</code> 는 다른 페이지로 접근할때 Same-Origin 의 페이지만 접근이 가능했다. (다른 도메인 서버에 ajax 요청을 보내지 못함)<br />
이를 우회하거나
- <code>jsonp</code> 방식
- browser 기동 옵션
- browser 플러그인 설치</p>
<p>표준스펙에 맞춰서 접근을 할 수 있다.
- CORS (아래)</p>
<h2 id="cross-origin-resource-sharing-cors"><a class="toclink" href="../../2019/09/23/xss-csrfxsrf-same-origin-policy-cors/#cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)</a></h2>
<p>Cross-Site Request 를 가능하게 한다.
- Simple Request
- Preflight Request
- Credential Request
- Non-Credential Request</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-19 00:00:00+00:00">September 19, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="first-class-citizen"><a class="toclink" href="../../2019/09/19/%EC%9D%BC%EA%B8%89%EA%B0%9D%EC%B2%B4first-class-citizen%EA%B0%80-%EB%AD%90%EC%A7%80/">일급객체(First class citizen)가 뭐지?</a></h2>
<p>1급 객체란?
아래 3 가지조건을 충족한다면 1급 객체라고 할수 있습니다.</p>
<ol>
<li>변수나 데이타에 할당 할 수 있어야 한다.</li>
<li>객체의 인자로 넘길 수 있어야 한다.</li>
<li>객체의 리턴값으로 리턴 할수 있어야 한다.</li>
</ol>
<p><code>javascript</code> 에서는 함수가 1급 객체지만, <code>java</code> 에선 그렇지 않다.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-17 00:00:00+00:00">September 17, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-apt-udpate"><a class="toclink" href="../../2019/09/17/docker-%EC%97%90%EC%84%9C-apt-udpate-%EC%9D%B4%ED%9B%84-%EB%A9%88%EC%B6%A4/">docker 에서 apt udpate 이후 멈춤</a></h2>
<h4 id="ubuntu-image-base-dockerfile-run-apt-update"><a class="toclink" href="../../2019/09/17/docker-%EC%97%90%EC%84%9C-apt-udpate-%EC%9D%B4%ED%9B%84-%EB%A9%88%EC%B6%A4/#ubuntu-image-base-dockerfile-run-apt-update">ubuntu image base 에서 dockerfile 에 RUN apt update 사용시</a></h4>
<p><a href="https://stackoverflow.com/questions/27273412/cannot-install-packages-inside-docker-ubuntu-image">stackoverflow 답변</a></p>
<pre><code class="language-shell">#1. apt udpate 이후 멈춰있음
RUN apt update
RUN apt intall -y wget

#2. 실행됨
RUN apt update &amp;&amp; apt install -y wget
</code></pre>
<blockquote>
<p>빌어먹을거 뭔차이지..</p>
</blockquote>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-17 00:00:00+00:00">September 17, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="vault-with-docker"><a class="toclink" href="../../2019/09/17/vault-with-docker/">Vault with docker</a></h2>
<h3 id="docker-vault"><a class="toclink" href="../../2019/09/17/vault-with-docker/#docker-vault">docker vault 를 빠르게 실행해보자</a></h3>
<p><code>--cap-add=IPC_LOCK</code></p>
<blockquote>
<p>Memory Locking and 'setcap'
The container will attempt to lock memory to prevent sensitive values from being swapped to disk and as a result must have --cap-add=IPC_LOCK provided to docker run. Since the Vault binary runs as a non-root user, setcap is used to give the binary the ability to lock memory. With some Docker storage plugins in some distributions this call will not work correctly; it seems to fail most often with AUFS. The memory locking behavior can be disabled by setting the SKIP_SETCAP environment variable to any non-empty value.</p>
</blockquote>
<p><code>-e 'VAULT_ADDR=http://127.0.0.1:8200'</code></p>
<blockquote>
<p>기본적으로 vault client 에서 https 를 사용하고 있기 때문에, http 를 사용하려면 vault 어쩌고 명령어를 할때마다 --address=https://127.0.0.1:8200 을 같이 써야한다. 귀찮으니까 환경변수로 넣자.
환경변수가 없고 https 없이 (환경변수에서 tls_disable) 컨테이너를 기동하면 vault 명령어시 아래와 같은 오류가 나온다.
<code>Error checking seal status: Get https://127.0.0.1:8200/v1/sys/seal-status: http: server gave HTTP response to HTTPS client</code></p>
</blockquote>
<p><code>-v vaultdata:/vault/file:z</code></p>
<blockquote>
<p>vaultdata 라는 docker volume 이 미리 준비되어있어야한다. 마지막에 z 옵션은 SELinux 가 활성화 되어있으면 사용해야한다.</p>
</blockquote>
<pre><code class="language-shell">$ docker volume create vaultdata

$ docker run \
  -d \
  -p 8200:8200 \
  --name=dev-vault \
  --cap-add=IPC_LOCK \
  --restart=always \
  -e 'VAULT_LOCAL_CONFIG={&quot;storage&quot;: {&quot;file&quot;: {&quot;path&quot;: &quot;/vault/file&quot;}}, &quot;listener&quot;: {&quot;tcp&quot;: { &quot;address&quot;: &quot;0.0.0.0:8200&quot;, &quot;tls_disable&quot;: &quot;true&quot;}}, &quot;ui&quot;: &quot;true&quot;, &quot;default_lease_ttl&quot;: &quot;168h&quot;, &quot;max_lease_ttl&quot;: &quot;720h&quot;}' \
  -e 'VAULT_ADDR=http://127.0.0.1:8200' \
  -v vaultdata:/vault/file:z \
  docker.io/vault:1.4.0 server
</code></pre>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2019-09-17 00:00:00+00:00">September 17, 2019</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="promise"><a class="toclink" href="../../2019/09/17/promise-%EC%9D%98-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%B3%B4%EB%A0%A4%EB%A9%B4/">Promise 의 상태를 보려면</a></h2>
<p>관련 포스트
- <a href="{{ site.url}}/javascript-promise">Promise 가 뭐지</a></p>
<blockquote>
<p>내마음대로 지껄일거야 틀려도몰라 흥흥</p>
</blockquote>
<p>javascript Promise 객체에는 세가지 상태가 있다.
- pending
- resolved
- rejected</p>
<p>명칭만 봐도 직관적으로 알겠다.</p>
<blockquote>
<p>browser console 창에서는 resolved 로 되어있는데 fulfilled 가 맞는지 잘 모르겠다. 아무튼.</p>
</blockquote>
<p>아무튼. 이 상태를 직접 읽어올 방법이 없는 듯 한데..</p>
<p><a href="https://ourcodeworld.com/articles/read/317/how-to-check-if-a-javascript-promise-has-been-fulfilled-rejected-or-resolved">출처</a></p>
<pre><code class="language-javascript">/**
 * This function allow you to modify a JS Promise by adding some status properties.
 * Based on: http://stackoverflow.com/questions/21485545/is-there-a-way-to-tell-if-an-es6-promise-is-fulfilled-rejected-resolved
 * But modified according to the specs of promises : https://promisesaplus.com/
 */
function MakeQuerablePromise(promise) {
    // Don't modify any promise that has been already modified.
    if (promise.isResolved) return promise;

    // Set initial state
    var isPending = true;
    var isRejected = false;
    var isFulfilled = false;

    // Observe the promise, saving the fulfillment in a closure scope.
    var result = promise.then(
        function(v) {
            isFulfilled = true;
            isPending = false;
            return v;
        },
        function(e) {
            isRejected = true;
            isPending = false;
            throw e;
        }
    );

    result.isFulfilled = function() { return isFulfilled; };
    result.isPending = function() { return isPending; };
    result.isRejected = function() { return isRejected; };
    return result;
}
</code></pre>
<p>사용법은 아래와 같다..</p>
<blockquote>
<p>그냥 복붙한 것 같아서 꼐림칙하지만.. ㅠㅠ 기록이니깐..</p>
</blockquote>
<pre><code class="language-javascript">// Your promise won't cast the .then function but the returned by MakeQuerablePromise
var originalPromise = new Promise(function(resolve,reject){
    setTimeout(function(){
        resolve(&quot;Yeah !&quot;);
    },10000);
});

var myPromise = MakeQuerablePromise(originalPromise);

console.log(&quot;Initial fulfilled:&quot;, myPromise.isFulfilled());//false
console.log(&quot;Initial rejected:&quot;, myPromise.isRejected());//false
console.log(&quot;Initial pending:&quot;, myPromise.isPending());//true

myPromise.then(function(data){
    console.log(data); // &quot;Yeah !&quot;
    console.log(&quot;Final fulfilled:&quot;, myPromise.isFulfilled());//true
    console.log(&quot;Final rejected:&quot;, myPromise.isRejected());//false
    console.log(&quot;Final pending:&quot;, myPromise.isPending());//false
});
</code></pre>
<p>간단한 <code>wrapping function</code> 과 <code>closure scope</code> 를 이용하여 상태를 알 수 있게 되었다!!</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <a class="md-pagination__link" href="../2/">2</a> <span class="md-pagination__current">3</span> <a class="md-pagination__link" href="../4/">4</a> <a class="md-pagination__link" href="../5/">5</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../9/">9</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": {"Compatibility": "compat", "rabbitmq": "rabbitmq"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>